/*
 * JSLess Library - v2.3.4
 * https://github.com/realstrategos/JSLess
 * *
 * Copyright 2013 OptixConnect LLC and other contributors
 *
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the GNU Lesser General Public License
 * (LGPL) version 3.0 which accompanies this distribution, and is available at
 * http://www.gnu.org/licenses/lgpl-3.0.en.html
 *
 */
!function($){if(!window.console){window.console={}}var m=["log","info","warn","error","debug","trace","dir","group","groupCollapsed","groupEnd","time","timeEnd","profile","profileEnd","dirxml","assert","count","markTimeline","timeStamp","clear"];for(var i=0;i<m.length;i++){if(!window.console[m[i]]){if(m[i]=="error"){window.console[m[i]]=function(e){alert(e)}}window.console[m[i]]=function(){}}}var logger={};var consoleMethods=["log","error","warn","debug","info"];for(var cm in consoleMethods){var method=consoleMethods[cm];logger[method]=(function(method){return function(message){if(method=="log"){if(jsless.log){console[method]("JSLess: "+message)}}else{if(method=="debug"){if(jsless.debug){console[method]("JSLess: "+message)}}else{console[method]("JSLess: "+message)}}}})(method)}function getSubWidgets($source,filter){var xElements=[];$source.find(filter).each(function(i,el){if($(el).parentsUntil($source,filter).length==0){xElements.push(el)}});return $(xElements)}var startTimer=new Date();var behaviorCounter=0;window.jsless=$.extend(true,{debug:false,log:false,logger:logger},window.jsless||{});var _jsless={settings:{selector:{target:"self",scope:"widget",latebind:true}},behaviors:{},_methods:{},process:function($element,options,isSubWidget){if($element.is("script")){return}if(options&&options.debug){jsless.debug=options.debug}if(options){$element.data("jsless-options",options)}var settings=$.extend(true,{},this.settings,options);var initTimer=new Date();if(!isSubWidget){behaviorCounter=0;startTimer=initTimer}var $widget=$element;if(!$element.attr("data-jsless-widget")){$widget=$element.parents("[data-jsless-widget]").first();if($widget.length==0){$widget=$("body");logger.info("declared body as root widget");$widget.attr("data-jsless-widget","root")}else{logger.log("missing data-jsless-widget, treating as a partial")}}var widgetID=$widget.attr("data-jsless-widget");var $subWidgets=$element.find("[data-jsless-widget]");$subWidgets=$subWidgets.filter(function(index){var temp=$(this).parentsUntil($element,"[data-jsless-widget]").length==0;return temp});var $targets=$element.find("[data-jsless]:not([data-jsless-widget])").addBack("[data-jsless]");$targets=$targets.filter(function(index){var temp=$(this).parentsUntil($element.parent(),"[data-jsless-widget][data-jsless-widget!="+widgetID+"]").length==0;return temp});logger.log("found: "+$targets.length+" elements and "+$subWidgets.length+" sub widgets ...");$targets.each(function(tIndex,target){var $target=$(target);var rawBehavior=$target.attr("data-jsless");var behaviors=[];if(rawBehavior.indexOf('[{"')==0){try{behaviors=$.parseJSON(rawBehavior)}catch(err){logger.error("Error parsing rawBehavior: "+rawBehavior+" :: "+err)}}else{try{var checkMe=eval(rawBehavior);if(Object.prototype.toString.call(checkMe)==="[object Array]"){behaviors=checkMe}}catch(err){logger.error("Error parsing rawBehavior: "+rawBehavior+" :: "+err)}}$(behaviors).each(function(index,behavior){jsless.processBehavior($widget,$target,behavior,settings)})});$subWidgets.each(function(tIndex,target){logger.log("processing subwidget ...");var $target=$(target);jsless.process($target,options,true)});if(!isSubWidget){logger.log("processed: "+behaviorCounter+" behaviors in "+(new Date()-initTimer)+"ms")}$widget.triggerHandler("jsless-widget-complete");$widget.trigger("jsless-widget-loaded")},processBehavior:function($widget,$element,behavior,settings){behaviorCounter++;var name=behavior.name;if(jsless.behaviors[name]===undefined){if(name=="html"||name=="htmlform"){jsless._methods[name]($widget,$element,behavior,settings)}else{logger.error("Behavior not found: "+name);return}}else{jsless.behaviors[name]($widget,$element,behavior,settings)}if(settings.debug){logger.debug("behavior: "+name+" processed in "+(new Date()-startTimer)+"ms");startTimer=new Date()}}};$.fn.jsless=function(options){return this.each(function(){var $this=$(this);jsless.process($this,options)})};if($.fn.toggleProp===undefined){$.fn.toggleProp=function(propName){return this.each(function(){var $this=$(this);$this.prop(propName,!$this.prop(propName));if($this.is("input[type=checkbox]")&&propName=="checked"){setTimeout(function(){$this.trigger("change")},0)}})}}logger.info("Loading Core...");window.jsless=$.extend(true,_jsless,window.jsless||{});setTimeout(function(){jsless.debug=false},0)}(window.jQuery);/*
 * JSLess Library - AJAX Invoke
 * https://github.com/realstrategos/JSLess
 * *
 * Copyright 2013 OptixConnect LLC and other contributors
 * Released under the Creative Commons Attribution NonCommercial (CC-NC)
 * http://creativecommons.org/licenses/by-nc/3.0/legalcode
 *
 */
!function(a){var e=jsless.logger;var f=function(h){var i=a.extend({},h,{data:a.postify(h.data),traditional:true});if(i.subdomain){i.url=location.protocol+"//"+i.subdomain+"."+location.host+i.url;i.datatype="jsonp"}var g=a.ajax(i);return g};var c=function(h,i){this.invoker=h;this.request=i;this.errormessage=null;this.success=true;if(i.status!=200){this.errormessage=i.status+" Error: "+i.statusText;this.success=false}var g=i.responseText;this.isHTML=true;if(i.responseJSON){this.isHTML=false;g=i.responseJSON}if(!this.isHTML){if(g.d&&Object.keys(g).length==1){g=g.d}}this.data=g};if(!Object.keys){Object.keys=(function(){var j=Object.prototype.hasOwnProperty,i=!({toString:null}).propertyIsEnumerable("toString"),g=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],h=g.length;return function(l){if(typeof l!=="object"&&(typeof l!=="function"||l===null)){throw new TypeError("Object.keys called on non-object")}var n=[],m,k;for(m in l){if(j.call(l,m)){n.push(m)}}if(i){for(k=0;k<h;k++){if(j.call(l,g[k])){n.push(g[k])}}}return n}}())}var d=function(g){this.settings=a.extend({},this.settings,g);if(this.settings.onComplete==null){throw"missing option onComplete"}a(window).bind("invoke-abort",this.Abort);if(this.settings.category){a(window).bind("invoke-abort-"+this.settings.category,this.Abort)}this._Start()};d.prototype={settings:{url:null,category:"normal",method:"GET",subdomain:null,params:null,onComplete:null,retryCount:0},failCount:0,_request:null,Retry:function(){this.Start()},_Start:function(){var g=function(j,i){this._running=false;if(j.status==401){e.warn("Attempted to access an UnAuthorized Page");a(window).trigger("invoke-authorizationerror",this._request);return}var h=new c(this,j);if(h.errormessage){this.failCount++}this.settings.onComplete(h)};if(this._running){return false}this._running=true;this._request=null;this._request=jsless.transport({url:this.settings.url,type:this.settings.method,dataType:this.settings.datatype,data:this.settings.params,cache:false,complete:a.proxy(g,this)});return true},Abort:function(){this.settings.onComplete=null;this.settings.onFail=null;this._running=false;if(this._request){try{this._request.abort()}catch(g){}}}};a.postify=function(i){var h={};var g=function(k,m){for(var j in k){if(k[j]==null){k[j]=""}var l=isFinite(j)?(m!=""?m:"")+"["+j+"]":(m!=""?m+".":"")+j;switch(typeof(k[j])){case"number":case"string":case"boolean":h[l]=k[j];break;case"object":if(k[j].toUTCString){h[l]=k[j].toUTCString().replace("UTC","GMT")}else{g(k[j],l!=""?l:j)}}}};g(i,"");return h};a.fn.jsless_invoke=function(g){var h=jsless.invoke(g)};var b={invoke:function(h){var g=new d(h);return g},transport:f};e.info("Loading Invoke ...");window.jsless=a.extend(true,b,window.jsless||{})}(window.jQuery);/*
 * JSLess Library - Builtin Methods
 * https://github.com/realstrategos/JSLess
 * *
 * Copyright 2013 OptixConnect LLC and other contributors
 * Released under the Creative Commons Attribution NonCommercial (CC-NC)
 * http://creativecommons.org/licenses/by-nc/3.0/legalcode
 *
 */
!function(a){var c=jsless.logger;var b={settings:{method:{name:null,onSuccess:"widget",onFail:"widget",eventSource:"self",requireEnabled:false,delay:-1,params:{dynamic:{},forms:[]}}},dataMap:function(g,d,e){var j={},f,l,n;for(f in g){l=f in d?d[f]:null;if(e&&l!=null&&typeof l==="object"&&typeof g[f]==="object"&&!(l instanceof jQuery)){l=jsless.dataMap(g[f],l,e)}var m=g[f];var i=j;var h=null;a.each(m.split("."),function(o,p){if(h!=null){i=i[h]}if(i[p]===undefined){i[p]={}}h=p});if(typeof l==="object"){var k=i[h];i[h]=a.extend(true,{},k,l)}else{i[h]=l}}return j},getSelector:function(h,f,d){if(h==null){throw"selector is null"}var e=null;var i={target:null,scope:"widget",latebind:true,mode:"html",getVal:function(){return e}};if(typeof h==="object"&&!(h instanceof jQuery)){a.extend(i,h)}else{i.target=h}var g=function(){var j=null;if(i.scope=="widget"){j=f}else{if(i.scope=="self"){j=d}else{if(i.scope=="document"){j=a(document)}else{if(i.scope=="parents"){j=d.parents()}else{j=a(i.scope)}}}}var k=j;if(i.target!=null){k=j.find(i.target)}if(h=="form"){k=d.parents("form").first()}return k};if(h=="self"){e=d}else{if(h=="widget"){i.mode="replaceWith";e=f}else{if(h=="body"){e=a("body")}else{if(h=="document"){e=a(document)}else{if(h=="window"){e=a(window)}else{if(h=="form"){e=d.parents("form").first()}else{if(h=="empty"){e=a("<div></div>")}else{if(i.latebind){i.getVal=g}else{e=g()}}}}}}}}return i},compileParams:function(h,e,d){var i=a.extend({},h);if(i.dynamic){var f={};a.each(i.dynamic,function(j,m){var l={name:null,target:m,object:"jQuery",method:"val",methodparams:[]};if(typeof m==="object"&&!(m instanceof jQuery)){a.extend(l,m)}l=jsless.getSelector(l,e,d);var k=l.name||j;f[k]=function(){var n=l.getVal();var o=n;if(l.object!="jQuery"){o=window[l.object]}var p=o[l.method].apply(n,l.methodparams);return p}});i.dynamic=f}if(i.forms){var g=[];a.each(i.forms,function(k,l){var j=jsless.getSelector(l,e,d);g.push(j)});i.forms=g}return i},getParams:function(f,e,d){var i=a.extend({},f);var g={};if(i.dynamic){a.each(i.dynamic,function(l,o){var n=g;var m=null;a.each(l.split("."),function(p,q){if(m!=null){n=n[m]}if(n[q]===undefined){n[q]={}}m=q});n[m]=o()});delete i.dynamic}var h={};if(i.forms){a.each(i.forms,function(o,m){var l=m.getVal();var n=jsless.processContainer(l);a.extend(h,n)});delete i.forms}var k={};a.each(i,function(l,n){var m=l;if(l.indexOf("_dynamic")>0||l.indexOf("_forms")>0){m=l.substr(1)}if(typeof n=="function"){k[m]=n({widget:e,element:d})}else{k[m]=n}});var j=a.extend(true,{},h,k,g);return j},getValue:function(d,h,g){var f=function(){var j=null;if(d.is("select")){d.find("option:selected").each(function(k,l){h=jsless.getValue(a(l),h,g)})}else{if(d.attr("contenteditable")!=null){j=d.html()}else{if(d.is("input:checkbox")){if(d.is(":checked")){j=d.val();if(!d.is("input[value]")||j=="on"){j=true}}else{if(!d.is("input[value]")||d.val()=="off"){j=false}}}else{if(d.is("input:radio")){if(d.is(":checked")){j=d.val()}}else{j=d.val()}}}}return j};var e=f();if(e!=null){if(d.is("[data-type='enum'],[data-commalist]")){var i=h[g]||"";if(!d.is("input:checkbox,input:radio")||d.is(":checked")){if(i.length>0){i+=", "}i+=e}e=i}if(d.is("[data-index]")){h[g]=e}else{if(d.is("[data-list]")||d.is("select[multiple] option:selected")){h[g]=h[g]||[];h[g].push(e)}else{h[g]=e}}}return h},processContainer:function(e,i){var h="[name],[data-list],[data-index]";var k="input[type!='button'][type!='submit'],select,textarea,[contenteditable]";var f=e.find(h+","+k).filter(function(l){var m=a(this).parentsUntil(e,h).length==0;return m});var g=f.filter(k);var d=f.not(g);var j={};a.each(g,function(n,m){var l=a(m);var o=i;if(l.attr("data-list")){o=l.attr("data-list")}if(l.attr("data-name")){o=l.attr("data-name")}if(l.attr("data-index")!=null){o=(o||"")+"["+l.attr("data-index")+"]"}if(!o){o=l.attr("name")}if(o==null){c.warn("element has no name: "+l[0].outerHTML);return}var p=jsless.getValue(l,j,o);j=p});a.each(d,function(n,m){var l=a(m);var p=jsless.processContainer(l);if(l.attr("data-list")!=null){var o=l.attr("data-list");if(!jQuery.isEmptyObject(p)){if(l.attr("data-index")!=null){o=(o||"")+"["+l.attr("data-index")+"]";a.extend(j,jsless.processContainer(l,o))}else{j[o]=j[o]||[];j[o].push(p)}}}else{var o=l.attr("name");if(l.attr("data-index")!=null){o+="["+l.attr("data-index")+"]"}if(j[o]){p=a.extend({},j[o],p)}j[o]=p}});return j},_methods:{html:function(f,d,g,k){var m=a.extend(true,{},jsless.settings.method,k.method,{name:"html",url:null,method:"GET",event:"click",stopEventPropagation:false,onSuccess:"widget",onFail:null,params:{dynamic:{},forms:[]}},g);if(!m.url){c.error("html url not specified: "+JSON.stringify(m))}if(!m.onFail){m.onFail=m.onSuccess}var e=jsless.getSelector(m.eventSource,f,d).getVal();var n=jsless.getSelector(m.onSuccess,f,d);var i=jsless.getSelector(m.onFail,f,d);var h=jsless.compileParams(m.params,f,d);if(m.event=="load"){f.one("jsless-widget-complete",function(o,p){m.eventData=p;jsless._methods.htmlevent(o,f,d,m,n,i,h,k)})}else{var l=function(){e.one(m.event,j)};var j=function(o,p){if(!m.requireEnabled||e.is(":enabled")){m.eventData=p;jsless._methods.htmlevent(o,f,d,m,n,i,h,k,l)}else{l()}};l()}},htmlevent:function(j,g,d,s,u,l,i,o,n){var m="";c.debug(s.name+" event:"+s.event+"\r\n\t :: "+m);if(s.stopEventPropagation&&s.event!="load"){j.preventDefault()}var p=jsless.getParams(i,g,d);var f=u.getVal();var e=l.getVal();if(s.eventDataMap&&s.eventData){var k=jsless.dataMap(s.eventDataMap,s.eventData);a.extend(p,k)}var r=d.triggerHandler("jsless-"+s.name+"-begin",[i]);if(r===undefined||r){d.trigger("jsless-ajax-begin");f.triggerHandler("jsless-"+s.name+"-beforestart");e.triggerHandler("jsless-"+s.name+"-beforestart");if(s.loading){var q=function(w){var v=a(a(s.loading).html());v.width(w.width());v.height(w.height());v.css("left",w[0].offsetLeft);v.css("top",w[0].offsetTop);w.append(v);v.show();d.bind("jsless-ajax-complete",function(){v.remove()})};q(f)}var h={url:s.url,category:"normal",datatype:"html",method:s.method,subdomain:null,params:p,onComplete:function(x){if(n){n()}x.success=x.success&&x.isHTML;var v=a(x.data);var y=jsless.processContainer(v.find("[data-jsless-params]"));if(v.attr("data-jsless-error")){x.success=false;x.errormessage=v.attr("data-jsless-error")}var z=u;var w=f;if(!x.success){z=l;w=e;d.trigger("jsless-ajax-beforefail");w.triggerHandler("jsless-"+s.name+"-beforefail",[y])}else{d.trigger("jsless-ajax-beforesuccess");w.triggerHandler("jsless-"+s.name+"-beforesuccess",[y])}d.trigger("jsless-ajax-beforecomplete");w.triggerHandler("jsless-"+s.name+"-beforecomplete",[y]);setTimeout(function(){a.each(w,function(D,C){var B=a(C);if(B.parents("body").length!=0){var A=v.clone();B[z.mode](A);A.jsless(o)}});setTimeout(function(){if(x.success){d.trigger("jsless-ajax-success");w.triggerHandler("jsless-"+s.name+"-success",[y])}else{d.trigger("jsless-ajax-fail");w.triggerHandler("jsless-"+s.name+"-fail",[y])}d.trigger("jsless-ajax-complete");w.triggerHandler("jsless-"+s.name+"-complete",[y])},0)},0)},retryCount:0};var t=function(){if(f.parents("body").length==0&&u.target!="empty"){c.debug(s.name+" event:"+s.event+"\r\n\t :: $success is detached");return}jsless.invoke(h)};if(s.delay<0){t()}else{setTimeout(t,s.delay)}}},htmlform:function(f,d,g,h){var i=a.extend(true,{},jsless.settings.method,h.method,{name:"html",url:null,method:"GET",event:d.is("form")?"submit":"click",stopEventPropagation:d.is("form"),onSuccess:"widget",onFail:null,params:{dynamic:{},forms:[]}},g);if(i.params.forms.length==0){if(d.is("form")){c.log("element is form");i.params.forms.push(d)}else{var e=d.parentsUntil(f,"form");if(e.length==1){c.log("element is within form")}else{c.log("element is formless");e=d}i.params.forms.push(e)}}jsless._methods.html(f,d,i,h)}}};c.info("Loading Methods ...");window.jsless=a.extend(true,b,window.jsless||{})}(window.jQuery);/*
 * JSLess Library - Builtin Behaviors
 * https://github.com/realstrategos/JSLess
 * *
 * Copyright 2013 OptixConnect LLC and other contributors
 * Released under the Creative Commons Attribution NonCommercial (CC-NC)
 * http://creativecommons.org/licenses/by-nc/3.0/legalcode
 *
 */
!function(a){var c=jsless.logger;var b={settings:{behavior:{name:null,event:"click",eventSource:"self",requireEnabled:false,target:"self",delay:-1,cancelDelay:null,params:[],dynamic:[],stopEventPropagation:false}},behaviors:{base:function(f,d,i,h){var e=jsless.getSelector(i.eventSource,f,d).getVal();var g=function(j,k){if(!i.requireEnabled||e.is(":enabled")){h(j,k)}};if(i.event=="load"){f.one("jsless-widget-complete",function(j,k){if(i.delay>=0){setTimeout(function(){g(j,k)},i.delay)}else{g(j,k)}})}else{if(i.delay>=0){e.bind(i.event,function(j,k){var l=setTimeout(function(){g(j,k)},i.delay);if(i.delay>0&&i.cancelDelay){e.one(i.cancelDelay,function(){clearTimeout(l)})}})}else{e.bind(i.event,g)}}},execute:function(e,d,f,i){var j=a.extend(true,{},jsless.settings.behavior,i.behavior,{name:"execute",object:"jQuery",method:null},f);if(!j.method){c.error("execute method not specified: "+JSON.stringify(j))}var g={};a.each(j.dynamic,function(m,n){if(j.dynamic[m]==null){return}var l=jsless.compileParams({dynamic:j.dynamic[m]},e,d);g[m]=l});var k=jsless.getSelector(j.target,e,d);var h=function(m,n){var q=j.params.slice(0);if(j.stopEventPropagation){m.stopPropagation()}c.debug(j.name+" event:"+j.event+" method: "+j.method+"\r\n\t :: "+JSON.stringify(j));var r=d.triggerHandler("jsless-"+j.name+"-begin");if(r===undefined||r){var l=k.getVal();a.each(g,function(t,u){var v=jsless.getParams(g[t],e,d);if(typeof v==="object"){a.extend(true,q,v)}else{q[t]=v}});d.triggerHandler("jsless-"+j.name+"-beforecomplete");var p=l;var o=l[j.method];a.each(q,function(t,u){if(q[t]=="@event"){q[t]=m}if(q[t]=="@eventData"){q[t]=n}if(q[t]=="@target"){q[t]=l}if(u instanceof Function){q[t]=u()}});if(j.object!="jQuery"){var p=window;a.each(j.object.split("."),function(t,u){p=p[u]});var o=p[j.method]}var s=o.apply(p,q);d.triggerHandler("jsless-"+j.name+"-complete")}};jsless.behaviors.base(e,d,j,h)},keyclick:function(e,d,f,h){var j=a.extend(true,{},jsless.settings.behavior,h.behavior,{name:"keyclick",event:"keydown",target:"self",keycode:13},f);var i=j.params;var k=jsless.getSelector(j.target,e,d);var g=function(n,o){c.debug(j.name+" event:"+j.event+"\r\n\t :: "+JSON.stringify(j));var p=d.triggerHandler("jsless-"+j.name+"-begin");if(p===undefined||p){var m=(n.keyCode?n.keyCode:n.which);if(m==j.keycode){n.preventDefault();var l=k.getVal();l.triggerHandler("click")}}};jsless.behaviors.base(e,d,j,g)},toggleClass:function(e,d,f,h){var j=a.extend(true,{},jsless.settings.behavior,h.behavior,{name:"toggleClass",className:null},f);if(!j.className){c.error("className not specified: "+JSON.stringify(j))}var i=j.params;var k=jsless.getSelector(j.target,e,d);var g=function(o,p){c.debug(j.name+" event:"+j.event+"\r\n\t :: "+JSON.stringify(j));var q=d.triggerHandler("jsless-"+j.name+"-begin");if(q===undefined||q){var m=k.getVal();var l=a(o.target).parents(j.target).addBack(j.target).first();var n=j.className;m.removeClass(n);l.addClass(n)}};jsless.behaviors.base(e,d,j,g)},parentTrigger:function(e,d,f,h){var i=a.extend(true,{},jsless.settings.behavior,h.method,{name:"parentTrigger",eventSource:"widget",parentSelector:"[data-jsless-widget]",parentEvent:"jsless-reload",level:1},f);var g=function(k,l){var j=a(k.target);if(i.level>0){j=a(j.parents(i.parentSelector)[i.level-1])}j.triggerHandler(i.parentEvent,l)};jsless.behaviors.base(e,d,i,g)}}};c.info("Loading Behaviors ...");window.jsless=a.extend(true,b,window.jsless||{})}(window.jQuery);